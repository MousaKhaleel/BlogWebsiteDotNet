@using Microsoft.AspNetCore.Identity
@using System.Security.Claims
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
	var userId = _userManager.GetUserId(User);
}

@model BlogWebsiteDotNet.ViewModels.BlogAndCommentsVM
@inject UserManager<User> _userManager


<head>
	<style>
		.contentContainer h2 {
			margin-top: 4%;
			text-align: center;
		}

		.contentContainer p {
			min-height: 60vh;
		}
	</style>
</head>

<div class="contentContainer">
	<h2>@Model.BlogTitle</h2>
	<!--TODO:add edit and delete-->
	@* <button type="submit" class="btn" style="background: rgb(0, 166, 204); color: white;">Delete Blog</button> *@
	<p>@Model.BlogContent</p>
</div>
<div>
	<h4>Leave a comment</h4>
	<form asp-action="WriteComment" method="POST">
		<div class="form-group">
			<input type="hidden" name="CommenterId" asp-for="CommenterId" value="@userId" />
			<input type="hidden" name="BlogId" asp-for="BlogId" value="@Model.BlogId" />

			<label for="content">Content:</label>
<textarea class="form-control"
		  id="content"
		  rows="2"
		  asp-for="CommentContent"
		  required></textarea>
		</div>
		<br />
		<button type="submit" class="btn w-100" style="background: rgb(0, 166, 204); color: white;">
			Publish
		</button>
	</form>
</div>
<hr />
<br />
<div>
	<ul>
		@foreach (var comment in Model.Comments)
		{
			<li>
				<p>@comment.User.UserName</p>
				<p>@comment.CommentContent</p>
			</li>
		}
	</ul>
</div>